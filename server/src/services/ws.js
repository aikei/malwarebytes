const { Server } = require('socket.io');
const log = require('../log/log');

let server = {}

const initWs = (httpServer) => {
  const connections = {};
  server.io = new Server(httpServer, {
    cors: {
      origin: '*',
      methods: ["GET","POST","UPGRADE"]
    }
  });
  server.io.on('connection', (socket) => {
    log.info('socket connected: id: %s, accessToken: %s', socket.id, socket.request.headers.authorization);
  });
}


module.exports = { initWs, server };