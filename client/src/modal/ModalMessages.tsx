import React from 'react'
import { useDispatch, useSelector } from 'react-redux';
import { removeModalMessage } from '../store/modalSlice';
import { State } from '../store/store';

const ModalMessages: React.FC = () => {

  const modalMessages = useSelector<State, any>((state) => state.modal.modalMessages);
  const dispatch = useDispatch();

  const show = modalMessages.length > 0;
  return (
    <div style={{
      display: show ? 'block' : 'none',
      backgroundColor: 'rgba(0,0,0,0.3)'
    }} className={`modal fade ${show ? 'show' : ''}`} id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabIndex={-1} aria-labelledby="staticBackdropLabel" aria-hidden="true">
      {modalMessages.map((msg: {title: string, message: string, deviceId: string}, index: number) => {
        return (<div className="modal-dialog" key={msg.deviceId}>
          <div className="modal-content">
            <div className="modal-header">
              <h5 className="modal-title" id="staticBackdropLabel">{msg.title}</h5>
              <button onClick={() => dispatch(removeModalMessage({ index }))} type="button" className="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div className="modal-body">
              <div>{msg.message}</div>
            </div>
            <div className="modal-footer">
              <button onClick={() => dispatch(removeModalMessage({ index }))} type="button" className="btn btn-secondary" data-bs-dismiss="modal">
                Close
              </button>
            </div>
          </div>
        </div>)
      })}
    </div>
  )
}

export default ModalMessages;
